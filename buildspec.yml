version: 0.2
env:
  parameter-store:
    PASSWORD: /Production/AppPassword

phases: 
  install:
    runtime-versions:
      nodejs: 20
    commands:
      - echo "ğŸ“¦ installing packages..."
      - echo "âœ… Packages installed successfully."
  pre_build:
    commands: 
      - echo "âš™ï¸ Testing..."
      - echo "âœ… Tests passed successfully."
  build:
    commands:
      - echo "ğŸš§ Starting compiling packages..."
      - echo "âœ… Build passed successfully."
  post_build:
    commands:
      - echo "ğŸšš Performing post-build packing and operations..."
      - aws deploy push --application-name 3016Application --s3-location s3://3016-deployment-revisions/development/source.zip --ignore-hidden-files 
      - aws deploy create-deployment --application-name 3016Application	 --s3-location bucket=3016-deployment-revisions,key=development/source.zip,bundleType=zip,eTag=80e501480a8545019660e87ca42a6f00,version=67ZE9Q8CZeo9XszaZ4F.eKmrlW7mnDrm --deployment-group-name 3016DeploymentGroup --deployment-config-name CodeDeployDefault.AllAtOnce --description "This deployment aims to deploy our code to the eligible EC2 instance(s)."
      - echo "âœ… Post build successful"

artifacts:
  files:
    - '**/*'
  name: deploy-nodejs-build-artifacts
